import { CancellationToken, Event } from 'vscode-languageserver-protocol';
import Uri from 'vscode-uri';
import { DiagnosticKind, ServiceStat } from 'coc.nvim';
import * as Proto from './protocol';
import { ITypeScriptServiceClient } from './typescriptService';
import API from './utils/api';
import { TypeScriptServiceConfiguration } from './utils/configuration';
import Logger from './utils/logger';
export interface TsDiagnostics {
    readonly kind: DiagnosticKind;
    readonly resource: Uri;
    readonly diagnostics: Proto.Diagnostic[];
}
export default class TypeScriptServiceClient implements ITypeScriptServiceClient {
    state: ServiceStat;
    readonly logger: Logger;
    private fileConfigurationManager;
    private pathSeparator;
    private tracer;
    private _configuration;
    private versionProvider;
    private tsServerLogFile;
    private servicePromise;
    private lastError;
    private lastStart;
    private numberRestarts;
    private cancellationPipeName;
    private requestQueue;
    private callbacks;
    private versionStatus;
    private readonly _onTsServerStarted;
    private readonly _onProjectLanguageServiceStateChanged;
    private readonly _onDidBeginInstallTypings;
    private readonly _onDidEndInstallTypings;
    private readonly _onTypesInstallerInitializationFailed;
    private _apiVersion;
    private readonly disposables;
    constructor();
    private _onDiagnosticsReceived;
    readonly onDiagnosticsReceived: Event<TsDiagnostics>;
    private _onConfigDiagnosticsReceived;
    readonly onConfigDiagnosticsReceived: Event<Proto.ConfigFileDiagnosticEvent>;
    private _onResendModelsRequested;
    readonly onResendModelsRequested: Event<void>;
    readonly configuration: TypeScriptServiceConfiguration;
    dispose(): void;
    private info;
    private error;
    restartTsServer(): Promise<any>;
    stop(): Promise<void>;
    readonly onTsServerStarted: Event<API>;
    readonly onProjectLanguageServiceStateChanged: Event<Proto.ProjectLanguageServiceStateEventBody>;
    readonly onDidBeginInstallTypings: Event<Proto.BeginInstallTypesEventBody>;
    readonly onDidEndInstallTypings: Event<Proto.EndInstallTypesEventBody>;
    readonly onTypesInstallerInitializationFailed: Event<Proto.TypesInstallerInitializationFailedEventBody>;
    readonly apiVersion: API;
    private service;
    ensureServiceStarted(): void;
    private startService;
    private startProcess;
    openTsServerLogFile(): Promise<boolean>;
    private serviceStarted;
    private setCompilerOptionsForInferredProjects;
    private getCompilerOptionsForInferredProjects;
    private serviceExited;
    toPath(uri: string): string;
    toResource(filepath: string): string;
    normalizePath(resource: Uri): string | null;
    private readonly inMemoryResourcePrefix;
    asUrl(filepath: string): Uri;
    execute(command: string, args: any, expectsResultOrToken?: boolean | CancellationToken): Promise<any>;
    private sendNextRequests;
    private sendRequest;
    private tryCancelRequest;
    private dispatchMessage;
    private dispatchEvent;
    private getTsServerArgs;
    getWorkspaceRootForResource(uri: string): string;
}

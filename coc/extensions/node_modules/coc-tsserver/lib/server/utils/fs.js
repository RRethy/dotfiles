"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const path_1 = tslib_1.__importDefault(require("path"));
const os_1 = tslib_1.__importDefault(require("os"));
const fs_1 = tslib_1.__importDefault(require("fs"));
function getParentDirs(fullpath) {
    let obj = path_1.default.parse(fullpath);
    if (!obj || !obj.root)
        return [];
    let res = [];
    let p = path_1.default.dirname(fullpath);
    while (p && p !== obj.root) {
        res.push(p);
        p = path_1.default.dirname(p);
    }
    return res;
}
exports.getParentDirs = getParentDirs;
function resolveRoot(cwd, subs, home) {
    home = home || os_1.default.homedir();
    let { root } = path_1.default.parse(cwd);
    let paths = getParentDirs(cwd);
    paths.unshift(cwd);
    for (let p of paths) {
        if (p == home || p == root)
            return null;
        for (let sub of subs) {
            let d = path_1.default.join(p, sub);
            if (fs_1.default.existsSync(d))
                return path_1.default.dirname(d);
        }
    }
    return root;
}
exports.resolveRoot = resolveRoot;
//# sourceMappingURL=fs.js.map